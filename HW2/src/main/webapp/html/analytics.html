<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/templatePage.css">
    <link rel="stylesheet" href="../css/Components.css">
    <link rel="stylesheet" href="../css/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/Analyticspage.js"></script>
    <script src="../js/utils.js"></script>
    <title>Analytics</title>
</head>


<body class="container-fluid">
    <div class="header-area" id="header-area">header</div>
    <div id="sidebar-area"></div>
    <div class="container-fluid">
        <div class="row">
            <div class="col min-vh-80 p-4">
                <!-- toggler -->
                <button class="btn float-end" data-bs-toggle="offcanvas" data-bs-target="#offcanvas" role="button">
                    <i class="bi bi-arrow-right-square-fill fs-3" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvas"></i>
                </button>
        
                <form>
                    <fieldset class="form-group">
                        <div class="form-group row col-md-6">
                            <select name="workspace" id="workspace_selector">
                                <option value="volvo">Volvo</option>
                                <option value="saab">Saab</option>
                                <option value="mercedes">Mercedes</option>
                                <option value="audi">Audi</option>
                            </select>
                            <div class="form-group row col-md-6">
                             <button type="button" id="select_workspace">Search</button><br />
                            </div>
                        </div>
                    </fieldset>
                </form>
   
                <table id="workspaceInfo" class="table table-striped analytics-table">
                    <thead>
                        <tr>
                            <th>User ID</th>
                            <th>Username</th>
                            <th>Workspace ID</th>
                            <th>Workspace Name</th>
                            <th>Num Completed Activities</th>
                            <th>Num Total Activities</th>
                            <th>Total Worked Time</th>
                            <th>Num Comments</th>
                        </tr>
                    </thead>
                    <tbody id="analyticsTableBody">
                        <!-- Table rows will be dynamically populated using JavaScript -->
                    </tbody>
                </table>

                <div class="chart-container analytics-chart">
                    <canvas id="activitiesChart"></canvas>
                </div>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
                // Sample data (replace with your actual data)
                var data = [
                    {
                        user_id: 1,
                        username: "John",
                        workspace_id: 1,
                        workspace_name: "Workspace 1",
                        num_completed_activities: 10,
                        num_total_activities: 20,
                        total_worked_time: 60,
                        num_comments: 5
                    },
                    // Add more data objects as needed
                ];

                // Populate the table with data
                var tableBody = document.getElementById("analyticsTableBody");
                data.forEach(function (item) {
                    var row = document.createElement("tr");
                    row.innerHTML = `
                <td>${item.user_id}</td>
                <td>${item.username}</td>
                <td>${item.workspace_id}</td>
                <td>${item.workspace_name}</td>
                <td>${item.num_completed_activities}</td>
                <td>${item.num_total_activities}</td>
                <td>${item.total_worked_time}</td>
                <td>${item.num_comments}</td>
              `;
                    tableBody.appendChild(row);
                });

                // Generate a chart using Chart.js
                var activitiesChart = document.getElementById("activitiesChart").getContext("2d");
                new Chart(activitiesChart, {
                    type: "bar",
                    data: {
                        labels: data.map(item => item.workspace_name),
                        datasets: [
                            {
                                label: "Completed Activities",
                                data: data.map(item => item.num_completed_activities),
                                backgroundColor: "rgba(75, 192, 192, 0.6)"
                            },
                            {
                                label: "Total Activities",
                                data: data.map(item => item.num_total_activities),
                                backgroundColor: "rgba(54, 162, 235, 0.6)"
                            }
                            , {
                                label: "Total Worked Time",
                                data: data.map(item => item.total_worked_time),
                                backgroundColor: "rgba(7, 180, 53, 0.6)"
                            },
                            {
                                label: "Total Comments",
                                data: data.map(item => item.num_comments),
                                backgroundColor: "rgba(1, 3, 235, 0.6)"
                            }
                        ]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            </script>
        </div>
    </div>
    </div>
    <div class="footer-area" id="footer-area"></div>
</body>

</html>